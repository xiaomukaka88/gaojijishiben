<script lang="ts">
  import { settingsStore } from '../stores/settings';
  import { themeStore } from '../stores/theme';

  export let showSettings: boolean = false;

  function handleToggleTheme() {
    themeStore.toggle();
    themeStore.save();
  }

  function handleToggleAlwaysOnTop() {
    settingsStore.update((s) => {
      const newValue = !s.alwaysOnTop;
      return { ...s, alwaysOnTop: newValue };
    });
    settingsStore.save();
  }
</script>

<div class="flex items-center justify-between px-6 py-3 bg-[var(--surface-color)] border-b border-[var(--border-color)]">
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 bg-gradient-to-br from-[var(--primary-color)] to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md">
      è®°
    </div>
    <div>
      <h1 class="font-bold text-lg leading-tight">é«˜çº§è®°äº‹æœ¬</h1>
      <p class="text-xs text-[var(--secondary-color)]">æ™ºèƒ½è®¡ç®— Â· è‡ªåŠ¨ä¿å­˜</p>
    </div>
  </div>

  <div class="flex items-center gap-2">
    <button
      on:click={handleToggleTheme}
      class="w-10 h-10 rounded-lg flex items-center justify-center text-lg hover:bg-[var(--bg-color)] transition-colors"
      title="åˆ‡æ¢ä¸»é¢˜"
    >
      {$themeStore.name === 'light' ? 'ğŸŒ™' : 'ğŸŒ“'}
    </button>

    <button
      on:click={handleToggleAlwaysOnTop}
      class="w-10 h-10 rounded-lg flex items-center justify-center text-lg {$settingsStore.alwaysOnTop ? 'bg-[var(--primary-color)] text-white shadow-md' : 'hover:bg-[var(--bg-color)]'} transition-all"
      title="ç½®é¡¶æ˜¾ç¤º"
    >
      ğŸ“Œ
    </button>

    <div class="w-px h-6 bg-[var(--border-color)] mx-1"></div>

    <button
      on:click={() => (showSettings = true)}
      class="w-10 h-10 rounded-lg flex items-center justify-center text-lg bg-[var(--bg-color)] hover:bg-[var(--border-color)] transition-colors"
      title="æ‰“å¼€è®¾ç½®"
    >
      âš™ï¸
    </button>
  </div>
</div>
